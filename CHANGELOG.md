# Change Log

## [4.1.0](https://github.com/zammad/zammad/tree/4.1.0) (2021-06-08)
[Full Changelog](https://github.com/zammad/zammad/compare/4.0.0...4.1.0)

**Implemented enhancements:**
- Accept 2xx as response for requests in UserAgent [3573](https://github.com/zammad/zammad/pull/3573) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Don't fail job is `deletable_id` is no longer available [3536](https://github.com/zammad/zammad/issues/3536) [[data privacy](https://github.com/zammad/zammad/labels/data privacy)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Add console output for searchindex rebuild status [3562](https://github.com/zammad/zammad/issues/3562) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Display minutes for session timeouts instead of seconds [3575](https://github.com/zammad/zammad/issues/3575) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[admin area](https://github.com/zammad/zammad/labels/admin area)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Feature request: Allow single tenant only application in microsoft 365 #3446 [3515](https://github.com/zammad/zammad/issues/3515) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)] [[integration](https://github.com/zammad/zammad/labels/integration)]
- Sidebar - Customer - Open tickets should be clickable and open advanced search [563](https://github.com/zammad/zammad/issues/563) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)] [[frontend / JS app](https://github.com/zammad/zammad/labels/frontend / JS app)]
- Sending and forwarding internal email messages [3467](https://github.com/zammad/zammad/issues/3467) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Show modal infomation 30 seconds before a session expires [3525](https://github.com/zammad/zammad/issues/3525) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Increase text modules box height for high resolutions [3544](https://github.com/zammad/zammad/issues/3544) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[text modules](https://github.com/zammad/zammad/labels/text modules)]
- "canonical"-tag is missing in knowledge base [3370](https://github.com/zammad/zammad/issues/3370) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Don't display "article type" selection for customers within UI [3012](https://github.com/zammad/zammad/issues/3012) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)] [[help appreciated](https://github.com/zammad/zammad/labels/help appreciated)]
- Allow to add S/MIME certificate chains from single file [3528](https://github.com/zammad/zammad/issues/3528) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Default session timeout verification on backend only once a hour [3526](https://github.com/zammad/zammad/issues/3526) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Default session timeouts to 4 weeks [3524](https://github.com/zammad/zammad/issues/3524) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- nginx zammad.conf file can not handle IPv6 [3371](https://github.com/zammad/zammad/issues/3371) [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]
- Times in ticket history are displayed in UTC [3018](https://github.com/zammad/zammad/issues/3018) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- Backup: use -delete instead of -exec [3516](https://github.com/zammad/zammad/pull/3516) [[backup](https://github.com/zammad/zammad/labels/backup)] [[enhancement](https://github.com/zammad/zammad/labels/enhancement)]

**Fixed bugs:**
- Update description of the session timeout setting [3597](https://github.com/zammad/zammad/issues/3597) [[admin area](https://github.com/zammad/zammad/labels/admin area)] [[bug](https://github.com/zammad/zammad/labels/bug)]
- Escalation calculation breaks data privacy ticket deletion [3588](https://github.com/zammad/zammad/issues/3588) [[bug](https://github.com/zammad/zammad/labels/bug)] [[data privacy](https://github.com/zammad/zammad/labels/data privacy)]
- `SessionTimeoutJob.perform_now` fails if user no longer exists [3586](https://github.com/zammad/zammad/issues/3586) [[bug](https://github.com/zammad/zammad/labels/bug)]
- Robots.txt should allow indexing Knowledge Base on custom URLs [3164](https://github.com/zammad/zammad/issues/3164) [[bug](https://github.com/zammad/zammad/labels/bug)] [[knowledge base](https://github.com/zammad/zammad/labels/knowledge base)]
- DataPrivacy may fail to clear user relations [3585](https://github.com/zammad/zammad/issues/3585) [[bug](https://github.com/zammad/zammad/labels/bug)] [[data privacy](https://github.com/zammad/zammad/labels/data privacy)]
- SessionTimeoutJob.perform_now scheduler job fails on update if scheduler process wasn't restarted [3581](https://github.com/zammad/zammad/issues/3581) [[bug](https://github.com/zammad/zammad/labels/bug)]
- Freshdesk import attribute ID mapping lookup constants fail application boot in systems with changed default names [3582](https://github.com/zammad/zammad/issues/3582) [[bug](https://github.com/zammad/zammad/labels/bug)]
- Package migrations fail on package installation or update due to codebase self-modification [3580](https://github.com/zammad/zammad/issues/3580) [[bug](https://github.com/zammad/zammad/labels/bug)] [[core](https://github.com/zammad/zammad/labels/core)]
- mentioned KB entries with the same title in different categories can not distinguished [3559](https://github.com/zammad/zammad/issues/3559) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[knowledge base](https://github.com/zammad/zammad/labels/knowledge base)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Invalid auto assignment conditions may break ticket view for unassigned tickets [3567](https://github.com/zammad/zammad/issues/3567) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Add Greek translation for chat [3569](https://github.com/zammad/zammad/pull/3569) [[chat](https://github.com/zammad/zammad/labels/chat)] [[translation](https://github.com/zammad/zammad/labels/translation)]
- Freshdesk [865](https://github.com/zammad/zammad/issues/865) [[feature backlog](https://github.com/zammad/zammad/labels/feature backlog)] [[import](https://github.com/zammad/zammad/labels/import)]
- Invalid html signature detection for exchange warning boxes [3571](https://github.com/zammad/zammad/issues/3571) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Chat on iOS only shows parts after typing [3534](https://github.com/zammad/zammad/issues/3534) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[chat](https://github.com/zammad/zammad/labels/chat)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- State list of tickets ignore locale for their sorting [3335](https://github.com/zammad/zammad/issues/3335) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- Attachments sent by Zammad not shown in Outlook [3529](https://github.com/zammad/zammad/issues/3529) [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- First response doesn't get solved after answering and state change to pending reminder [3551](https://github.com/zammad/zammad/issues/3551) [[bug](https://github.com/zammad/zammad/labels/bug)] [[escalation logic](https://github.com/zammad/zammad/labels/escalation logic)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- Pressing "Cancel" when creating a new ticket or separating an existing ticket doesn't close tab [2669](https://github.com/zammad/zammad/issues/2669) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)]
- Don't display profile link if user has no user_preferences.* permissions at all [3546](https://github.com/zammad/zammad/issues/3546) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- No Error Message on Failed Uploads [2383](https://github.com/zammad/zammad/issues/2383) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[frontend / JS app](https://github.com/zammad/zammad/labels/frontend / JS app)]
- CTI Log performance bad because of reformatting of the phone number [3550](https://github.com/zammad/zammad/issues/3550) [[CTI](https://github.com/zammad/zammad/labels/CTI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[integration](https://github.com/zammad/zammad/labels/integration)] [[performance](https://github.com/zammad/zammad/labels/performance)]
- S/SMIME: Intermediate-CA verification fails [3397](https://github.com/zammad/zammad/issues/3397) [[question](https://github.com/zammad/zammad/labels/question)]
- Status code 500 when trying to sort by groups in text module management [3494](https://github.com/zammad/zammad/issues/3494) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[macros](https://github.com/zammad/zammad/labels/macros)] [[text modules](https://github.com/zammad/zammad/labels/text modules)]
- Selecting Textmodules, Knowledge Base Articles and the Mentions Feature are not working for mobile devices on Zammad 4.0 [3495](https://github.com/zammad/zammad/issues/3495) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- Can't add (or run) DataPrivacyTask if the to remove user has too many ticket relations [3548](https://github.com/zammad/zammad/issues/3548) [[bug](https://github.com/zammad/zammad/labels/bug)] [[data privacy](https://github.com/zammad/zammad/labels/data privacy)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Wrong Variable-Reference for Tags (Trigger, Scheduler) [2769](https://github.com/zammad/zammad/issues/2769) [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[trigger](https://github.com/zammad/zammad/labels/trigger)]
- Broken UI - Create Reporting profile [3499](https://github.com/zammad/zammad/issues/3499) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[regression](https://github.com/zammad/zammad/labels/regression)]
- Ticket selector for first_response_escalation_at, update_escalation_at, close_escalation_at missing [3547](https://github.com/zammad/zammad/issues/3547) [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[ticket](https://github.com/zammad/zammad/labels/ticket)] [[trigger](https://github.com/zammad/zammad/labels/trigger)]
- new _plugin dir introduces auth:login events which will never get triggered [3508](https://github.com/zammad/zammad/issues/3508) [[bug](https://github.com/zammad/zammad/labels/bug)] [[core](https://github.com/zammad/zammad/labels/core)]
- Translate link text of link template in organization sidebar in ticket zoom [3543](https://github.com/zammad/zammad/issues/3543) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Ensure Google Calendars are fetched via `HTTPS` [3545](https://github.com/zammad/zammad/issues/3545) [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Opening user edit dialog with `admin.user`  causes WebApp freeze for 10-20 sec. with 100+ roles [3541](https://github.com/zammad/zammad/issues/3541) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[performance](https://github.com/zammad/zammad/labels/performance)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- POST /api/v1/users/avatar with empty input -> undefined method `substr' for nil:NilClass [3492](https://github.com/zammad/zammad/issues/3492) [[bug](https://github.com/zammad/zammad/labels/bug)]
- prevent "CSRF token verification failed!" error [3531](https://github.com/zammad/zammad/pull/3531)
- Escalation overview and all escalation related triggers/schedulers broken in Zammad 4.0 [3523](https://github.com/zammad/zammad/issues/3523) [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[regression](https://github.com/zammad/zammad/labels/regression)]
- Customer overview doesn't load on change [3479](https://github.com/zammad/zammad/issues/3479) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[overviews](https://github.com/zammad/zammad/labels/overviews)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Outgoing emails with tables have borders (do not contain design elements in email reset css) [3506](https://github.com/zammad/zammad/issues/3506) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)]
- Google and Microsoft 365 are missing filter & signature page content [3522](https://github.com/zammad/zammad/issues/3522) [[bug](https://github.com/zammad/zammad/labels/bug)] [[channel](https://github.com/zammad/zammad/labels/channel)] [[frontend / JS app](https://github.com/zammad/zammad/labels/frontend / JS app)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Unable to verify S/MIME mail signature signed with certificate chain [3517](https://github.com/zammad/zammad/issues/3517) [[bug](https://github.com/zammad/zammad/labels/bug)] [[mail processing](https://github.com/zammad/zammad/labels/mail processing)]
- Make session TTL configurable [3520](https://github.com/zammad/zammad/issues/3520) [[feature backlog](https://github.com/zammad/zammad/labels/feature backlog)]
- local gitlab without https is only partially supported [3512](https://github.com/zammad/zammad/issues/3512) [[bug](https://github.com/zammad/zammad/labels/bug)] [[integration](https://github.com/zammad/zammad/labels/integration)]
- Admin sidebar scrolls up on click on translations menu [3445](https://github.com/zammad/zammad/issues/3445) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[admin area](https://github.com/zammad/zammad/labels/admin area)] [[bug](https://github.com/zammad/zammad/labels/bug)]
- Caller Log: Incoming calls move tabs out of Browser context [3444](https://github.com/zammad/zammad/issues/3444) [[CTI](https://github.com/zammad/zammad/labels/CTI)] [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- KB Edit / Save entries results in JS errors and unsaved articles [3486](https://github.com/zammad/zammad/issues/3486) [[bug](https://github.com/zammad/zammad/labels/bug)] [[knowledge base](https://github.com/zammad/zammad/labels/knowledge base)]
- Full quote shows "<agent> wrote:" instead of "<customer> wrote" when agent toggled article visibility [2629](https://github.com/zammad/zammad/issues/2629) [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- Error 500:{"error":"undefined method `+' for nil:NilClass"} - Creating Overview [3490](https://github.com/zammad/zammad/issues/3490) [[bug](https://github.com/zammad/zammad/labels/bug)] [[overviews](https://github.com/zammad/zammad/labels/overviews)]
- Not authorized error using Im X-On-Behalf-Of [3468](https://github.com/zammad/zammad/issues/3468) [[API](https://github.com/zammad/zammad/labels/API)] [[authentication](https://github.com/zammad/zammad/labels/authentication)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- Invalid `null` value for user's last name [3488](https://github.com/zammad/zammad/issues/3488) [[admin area](https://github.com/zammad/zammad/labels/admin area)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[data privacy](https://github.com/zammad/zammad/labels/data privacy)]
- mention in email body breaks email parsing [3489](https://github.com/zammad/zammad/issues/3489) [[bug](https://github.com/zammad/zammad/labels/bug)] [[mail processing](https://github.com/zammad/zammad/labels/mail processing)] [[ticket](https://github.com/zammad/zammad/labels/ticket)]
- `read` permission is not enough to display subscribed tickets in overviews [3482](https://github.com/zammad/zammad/issues/3482) [[bug](https://github.com/zammad/zammad/labels/bug)] [[overviews](https://github.com/zammad/zammad/labels/overviews)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Macros are not displayed within the Mobile View [3473](https://github.com/zammad/zammad/issues/3473) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- UX problem with scheduler and postmaster condition filter is user selection is used [3480](https://github.com/zammad/zammad/issues/3480) [[UX/UI](https://github.com/zammad/zammad/labels/UX/UI)] [[bug](https://github.com/zammad/zammad/labels/bug)]
- Mention does not notify users without full permission on group [3471](https://github.com/zammad/zammad/issues/3471) [[bug](https://github.com/zammad/zammad/labels/bug)] [[notification](https://github.com/zammad/zammad/labels/notification)] [[prioritised by payment](https://github.com/zammad/zammad/labels/prioritised by payment)]
- Mentions migration fails because of unexpected User notification_config matrix state. [3472](https://github.com/zammad/zammad/issues/3472) [[bug](https://github.com/zammad/zammad/labels/bug)] [[update](https://github.com/zammad/zammad/labels/update)]
- Invalid elasticsearch(-oss) alternative dependency format breaks package installation/update for RPM based installations. [3470](https://github.com/zammad/zammad/issues/3470) [[bug](https://github.com/zammad/zammad/labels/bug)] [[update](https://github.com/zammad/zammad/labels/update)]
- Startup fails with "Circular dependency detected while autoloading constant Tag::WritesToTicketHistory (RuntimeError)" [3469](https://github.com/zammad/zammad/issues/3469) [[blocker](https://github.com/zammad/zammad/labels/blocker)] [[bug](https://github.com/zammad/zammad/labels/bug)]
